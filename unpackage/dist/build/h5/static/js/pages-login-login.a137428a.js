(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-login-login"],{"423a":function(e,n,t){"use strict";t.r(n);var i=t("b204"),o=t("7e8f");for(var a in o)"default"!==a&&function(e){t.d(n,e,(function(){return o[e]}))}(a);t("9d9a");var s,l=t("f0c5"),c=Object(l["a"])(o["default"],i["b"],i["c"],!1,null,"46d6b05c",null,!1,i["a"],s);n["default"]=c.exports},"48e7":function(e,n,t){var i=t("d968");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var o=t("4f06").default;o("21fedc1d",i,!0,{sourceMap:!1,shadowMode:!1})},"54e0":function(e,n,t){"use strict";t("d3b7"),t("ac1f"),t("841c"),t("1276"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=t("59a4"),o={data:function(){return{phoneVal:"",word:"",cahngeColor:!1,isOvertime:!1,phoneValue:"",messageCode:"",pwsValue:"",areacodenumber:"",loginShow:!0,eyeShow:!0,showPhone:!1,showAuthorization:!0,code:"",session_key:""}},onLoad:function(){var e=this;this.word=this.login.getCode,uni.login({success:function(n){if(console.log(n),"login:ok"==n.errMsg){var t={code:n.code};(0,i.getOpenid)(t).then((function(n){console.log(n),e.session_key=n.data.session_key}))}else uni.showToast({title:"系统异常，请联系管理员!"})}})},onShow:function(){uni.getStorageSync("areacodeData")?this.areacodenumber=uni.getStorageSync("areacodeData").mobile_prefix:this.areacodenumber=86},computed:{login:function(){return this.$t("login")},commonality:function(){return this.$t("commonality")}},methods:{cutLogin:function(){console.log("触发"),this.loginShow=!this.loginShow},phoneInput:function(){this.phoneVal&&""!=this.pwsValue?this.cahngeColor=!0:this.cahngeColor=!1},messageInput:function(){this.phoneValue&&""!=this.messageCode?this.cahngeColor=!0:this.cahngeColor=!1},eyeShowtip:function(){this.eyeShow=!this.eyeShow},qqmessages:function(){console.log("触发");var e=this,n=60;if(""==this.phoneValue)return wx.showToast({title:this.login.phoneTip,icon:"none"}),!1;if(console.log(this.isOvertime),!this.isOvertime){var t={phone:this.phoneValue,type:2,prefix:this.areacodenumber};(0,i.getCode)(t).then((function(t){if(e.isOvertime=!0,console.log(t),0!=t.code)console.log("错误"),e.isOvertime=!1,wx.showToast({title:t.msg,icon:"none"});else var i=setInterval((function(){n--;var t="".concat(e.login.Sent)+" "+"(".concat(n,"s)");if(e.word=t,n<0){e.isOvertime=!1,clearInterval(i);var o=e.login.resend;e.word=o}}),1e3)}))}},wxLogin:function(){console.log("H5微信登录"),this.wxAuthorize()},wxAuthorize:function(){window.location.href;var e=this.getWxUrlData("code");if(console.log("fsdfsad"),console.log("params",e),e){console.log("code",e);var n={code:e};getopenid(n).then((function(e){console.log(e)}))}else{var t="wxe23e57a4e7b1c293",i="http://ceshi.xiaoyuzhong123.com",o=encodeURIComponent(i),a="https://open.weixin.qq.com/connect/oauth2/authorize?appid="+t+"&redirect_uri="+o+"&scope=snsapi_userinfo&response_type=code&#wechat_redirect";window.location.href=a}},getWxUrlData:function(e){for(var n=window.location.search.substring(1),t=n.split("&"),i=0;i<t.length;i++){var o=t[i].split("=");if(o[0]==e)return o[1]}return!1},pwsLogin:function(){if(""!=this.phoneVal){""==this.pwsValue&&uni.showToast({title:this.login.PwsTip,icon:"none"});var e={phone:this.phoneVal,password:this.pwsValue};(0,i.Login)(e).then((function(e){if(console.log("登录",e),0==e.code){uni.setStorage({key:"token",data:e.data.token,success:function(){console.log("存储成功")}}),uni.setStorage({key:"user",data:e.data,success:function(){console.log("存储成功")}});var n=window.JAnalyticsInterface.Event.LoginEvent,t=new n("密码登录",!0);t.addKeyValue("key1","value1").addKeyValue("key2","value2"),window.JAnalyticsInterface.onEvent(t),uni.switchTab({url:"../index/index"})}else{uni.showToast({title:e.msg,icon:"none"});n=window.JAnalyticsInterface.Event.LoginEvent,t=new n("密码登录",!1);t.addKeyValue("key1","value1").addKeyValue("key2","value2"),window.JAnalyticsInterface.onEvent(t)}}))}else uni.showToast({title:this.login.phoneTip,icon:"none"})},messageLogin:function(){if(""!=this.messageCode)if(""!=this.phoneValue){var e={phone:this.phoneValue,code:this.messageCode};(0,i.Setcode)(e).then((function(e){if(console.log(e),0==e.code){uni.setStorage({key:"token",data:e.data.token,success:function(){console.log("存储成功")}}),uni.setStorage({key:"user",data:e.data,success:function(){console.log("存储成功")}});var n=window.JAnalyticsInterface.Event.LoginEvent,t=new n("短信登录",!0);t.addKeyValue("key1","value1").addKeyValue("key2","value2"),window.JAnalyticsInterface.onEvent(t),uni.switchTab({url:"../index/index"})}else{n=window.JAnalyticsInterface.Event.LoginEvent,t=new n("短信登录",!1);t.addKeyValue("key1","value1").addKeyValue("key2","value2"),window.JAnalyticsInterface.onEvent(t),uni.showToast({title:e.msg,icon:"none"})}}))}else uni.showToast({title:this.login.phoneTip,icon:"none"});else uni.showToast({title:this.login.codeTip,icon:"none"})},getSetting:function(){return new Promise((function(e,n){uni.getSetting({success:function(n){n.authSetting["scope.userInfo"]?(console.log("存在"),e(!0)):(console.log("不存在"),e(!1))}})})).catch((function(e){console.log(e)}))},getUserInfo:function(e){var n=this,t=this.getSetting();t.then((function(t){if(console.log("是否已经授权",t),t){console.log("用户信息，加密数据",e);var o=JSON.parse(e.detail.rawData);console.log(o);var a={encryptedData:e.detail.encryptedData,iv:e.detail.iv,sessionKey:n.session_key};console.log(a),(0,i.getUserInfos)(a).then((function(e){console.log("解密",e),uni.setStorage({key:"token",data:e.data.token,success:function(){console.log("存储成功")}}),uni.setStorage({key:"user",data:e.data,success:function(){console.log("存储成功")}}),0==e.data.status?uni.navigateTo({url:"/pages/login/wxlogin"}):1==e.data.status?uni.switchTab({url:"/pages/index/index"}):uni.showToast({title:e.msg,icon:"none"})}))}else uni.showToast({title:"授权失败，请确认授权已开启",mask:!0,icon:"none"})}))},areaCode:function(){uni.navigateTo({url:"./areacode"})},forgetPsw:function(){uni.navigateTo({url:"./message"})},agreement:function(){uni.navigateTo({url:"./agreement"})}}};n.default=o},"7e8f":function(e,n,t){"use strict";t.r(n);var i=t("54e0"),o=t.n(i);for(var a in i)"default"!==a&&function(e){t.d(n,e,(function(){return i[e]}))}(a);n["default"]=o.a},"9d9a":function(e,n,t){"use strict";var i=t("48e7"),o=t.n(i);o.a},b204:function(e,n,t){"use strict";var i;t.d(n,"b",(function(){return o})),t.d(n,"c",(function(){return a})),t.d(n,"a",(function(){return i}));var o=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("v-uni-view",{staticClass:"wxlogin"},[t("v-uni-view",{staticClass:"wxlogin-logo"},[t("v-uni-image",{attrs:{src:"https://boxue-resource.oss-cn-shenzhen.aliyuncs.com/tie/logo.png"}})],1),e.loginShow?t("v-uni-view",[t("v-uni-view",{staticClass:"wxlogin-phone"},[t("v-uni-input",{staticClass:"wxlogin-content",attrs:{type:"text",placeholder:e.login.phoneTip},on:{input:function(n){arguments[0]=n=e.$handleEvent(n),e.phoneInput.apply(void 0,arguments)}},model:{value:e.phoneVal,callback:function(n){e.phoneVal=n},expression:"phoneVal"}})],1),t("v-uni-view",{staticClass:"wxlogin-line"}),t("v-uni-view",{staticClass:"wxlogin-pws"},["checkbox"===(e.eyeShow?"password":"text")?t("v-uni-input",{staticClass:"wxlogin-pws-content",staticStyle:{border:"none",width:"100%",outline:"none","font-size":"32rpx","padding-left":"13rpx",color:"#666666"},attrs:{placeholder:e.login.PwsTip,type:"checkbox"},on:{input:function(n){arguments[0]=n=e.$handleEvent(n),e.phoneInput.apply(void 0,arguments)}},model:{value:e.pwsValue,callback:function(n){e.pwsValue=n},expression:"pwsValue"}}):"radio"===(e.eyeShow?"password":"text")?t("input",{directives:[{name:"model",rawName:"v-model",value:e.pwsValue,expression:"pwsValue"}],staticClass:"wxlogin-pws-content",staticStyle:{border:"none",width:"100%",outline:"none","font-size":"32rpx","padding-left":"13rpx",color:"#666666"},attrs:{placeholder:e.login.PwsTip,type:"radio"},domProps:{checked:e._q(e.pwsValue,null)},on:{input:e.phoneInput,change:function(n){e.pwsValue=null}}}):t("input",{directives:[{name:"model",rawName:"v-model",value:e.pwsValue,expression:"pwsValue"}],staticClass:"wxlogin-pws-content",staticStyle:{border:"none",width:"100%",outline:"none","font-size":"32rpx","padding-left":"13rpx",color:"#666666"},attrs:{placeholder:e.login.PwsTip,type:e.eyeShow?"password":"text"},domProps:{value:e.pwsValue},on:{input:[function(n){n.target.composing||(e.pwsValue=n.target.value)},e.phoneInput]}}),t("v-uni-view",{staticClass:"wxlogin-pws-icon",on:{click:function(n){arguments[0]=n=e.$handleEvent(n),e.eyeShowtip.apply(void 0,arguments)}}},[t("v-uni-image",{attrs:{src:e.eyeShow?"https://boxue-resource.oss-cn-shenzhen.aliyuncs.com/tie/bieye.png":"https://boxue-resource.oss-cn-shenzhen.aliyuncs.com/tie/eye.png",mode:""}})],1)],1),t("v-uni-view",{staticClass:"wxlogin-line"}),t("v-uni-view",{staticClass:"wxlogin-wxlogin",on:{click:function(n){arguments[0]=n=e.$handleEvent(n),e.pwsLogin.apply(void 0,arguments)}}},[t("v-uni-view",{staticClass:"wxlogin-btn",class:e.cahngeColor?"cahngeColor":""},[t("v-uni-text",[e._v(e._s(e.commonality.confirm))])],1)],1)],1):t("v-uni-view",[t("v-uni-view",{staticClass:"wxlogin-phone"},[t("v-uni-view",{staticClass:"wxlogin-phone-left",on:{click:function(n){arguments[0]=n=e.$handleEvent(n),e.areaCode.apply(void 0,arguments)}}},[t("v-uni-view",{staticClass:"wxlogin-phone-left-size"},[e._v("+"+e._s(e.areacodenumber))]),t("v-uni-view",{staticClass:"iconfont icon-xiajiantou"})],1),t("v-uni-input",{staticClass:"wxlogin-content",attrs:{type:"text",placeholder:e.login.phoneTip},on:{input:function(n){arguments[0]=n=e.$handleEvent(n),e.messageInput.apply(void 0,arguments)}},model:{value:e.phoneValue,callback:function(n){e.phoneValue=n},expression:"phoneValue"}})],1),t("v-uni-view",{staticClass:"wxlogin-line"}),t("v-uni-view",{staticClass:"wxlogin-yzm"},[t("v-uni-input",{attrs:{type:"text",placeholder:e.login.codeTip},on:{input:function(n){arguments[0]=n=e.$handleEvent(n),e.messageInput.apply(void 0,arguments)}},model:{value:e.messageCode,callback:function(n){e.messageCode=n},expression:"messageCode"}}),t("v-uni-view",{staticClass:"message-yzm-hq",on:{click:function(n){arguments[0]=n=e.$handleEvent(n),e.qqmessages.apply(void 0,arguments)}}},[t("v-uni-text",[e._v(e._s(e.word))])],1)],1),t("v-uni-view",{staticClass:"wxlogin-line"}),t("v-uni-view",{staticClass:"wxlogin-wxlogin",on:{click:function(n){arguments[0]=n=e.$handleEvent(n),e.messageLogin.apply(void 0,arguments)}}},[t("v-uni-view",{staticClass:"wxlogin-btn",class:e.cahngeColor?"cahngeColor":""},[t("v-uni-text",[e._v(e._s(e.commonality.confirm))])],1)],1)],1),t("v-uni-view",{staticClass:"wxlogin-register",on:{click:function(n){arguments[0]=n=e.$handleEvent(n),e.forgetPsw.apply(void 0,arguments)}}},[e._v(e._s(e.login.Pwsforget))]),t("v-uni-view",{staticClass:"wxlogin-other"},[t("v-uni-text",[e._v(e._s(e.login.ElseLogin))])],1),t("v-uni-view",{staticClass:"wxlogin-imgbtn"},[t("v-uni-view",{staticClass:"wxlogin-imgbtn-l",on:{click:function(n){arguments[0]=n=e.$handleEvent(n),e.wxLogin.apply(void 0,arguments)}}},[t("v-uni-image",{staticClass:"wxlogin-imgbtn-wx",attrs:{src:"https://boxue-resource.oss-cn-shenzhen.aliyuncs.com/tie/wx.png",mode:""}}),t("v-uni-view",{staticClass:"wxlogin-imgbtn-name"},[e._v(e._s(e.login.wxLOgin))])],1),t("v-uni-view",{staticClass:"wxlogin-imgbtn-r",on:{click:function(n){arguments[0]=n=e.$handleEvent(n),e.cutLogin.apply(void 0,arguments)}}},[t("v-uni-image",{staticClass:"wxlogin-imgbtn-st",attrs:{src:e.loginShow?"https://boxue-resource.oss-cn-shenzhen.aliyuncs.com/tie/yz.png":"https://boxue-resource.oss-cn-shenzhen.aliyuncs.com/tie/st.png",mode:""}}),t("v-uni-view",{staticClass:"wxlogin-imgbtn-name"},[e._v(e._s(e.loginShow?e.login.yzLogin:e.login.zhlogin))])],1)],1),t("v-uni-view",[t("v-uni-view",{staticClass:"wxlogin-info"},[t("v-uni-view",{staticClass:"wxlogin-info-left"},[e._v(e._s(e.login.rexy))]),t("v-uni-view",{staticClass:"wxlogin-info-right",on:{click:function(n){arguments[0]=n=e.$handleEvent(n),e.agreement.apply(void 0,arguments)}}},[e._v("《"+e._s(e.login.privacy)+"》")])],1)],1)],1)},a=[]},d968:function(e,n,t){var i=t("24fb");n=i(!1),n.push([e.i,'uni-input[data-v-46d6b05c]{background:transparent!important}.getPhone[data-v-46d6b05c]{width:100%;height:100%;position:fixed;top:0;left:0;z-index:999;background:none}.input[data-v-46d6b05c]::-webkit-input-placeholder{color:#cacaca!important}.input[data-v-46d6b05c]:-moz-placeholder{color:#cacaca!important}.input[data-v-46d6b05c]:-ms-input-placeholder{color:#cacaca!important}.cahngeColor[data-v-46d6b05c]{background:#dc2a1f!important;color:#fff!important}[data-v-46d6b05c] uni-input[type="text"],\nuni-input[type="password"][data-v-46d6b05c]{width:100%;border:none}uni-input[type="password"][data-v-46d6b05c]{border:none;padding:0}uni-input[data-v-46d6b05c]:focus,\nuni-textarea[data-v-46d6b05c]:focus{outline:none}.wxlogin[data-v-46d6b05c]{\n  /* padding-top: 150rpx; */\n  /* padding-bottom: 122rpx; */padding:20% %?40?% %?0?%;height:100%;box-sizing:border-box;background:#fff}.wxlogin-logo[data-v-46d6b05c]{width:100%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.wxlogin-logo uni-image[data-v-46d6b05c]{width:%?152?%;height:%?152?%}.wxlogin-phone[data-v-46d6b05c]{width:%?588?%;\n  /* width: 100%; */margin:0 auto;padding:%?80?% 0 %?20?% %?0?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:end;-webkit-align-items:flex-end;align-items:flex-end}.wxlogin-phone-left[data-v-46d6b05c]{display:-webkit-box;display:-webkit-flex;display:flex;height:%?40?%;line-height:%?40?%}.wxlogin-phone-left-size[data-v-46d6b05c]{font-size:%?36?%;font-family:PingFang SC;font-weight:500;color:#333}.wxlogin-phone-left .icon-xiajiantou[data-v-46d6b05c]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;font-size:%?42?%;font-weight:700}.wxlogin-phone .wxlogin-content[data-v-46d6b05c]{padding-left:%?13?%;font-size:%?32?%;font-family:PingFang SC;font-weight:500;color:#333}.wxlogin-line[data-v-46d6b05c]{width:%?588?%;height:1px;background:#eee;border-radius:1px;margin:0 auto}.wxlogin-yzm[data-v-46d6b05c]{width:%?588?%;padding:%?65?% %?0?% %?20?% %?0?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;margin:0 auto}.wxlogin-yzm uni-input[data-v-46d6b05c]{-webkit-box-flex:1;-webkit-flex:1;flex:1;padding-left:%?13?%;font-size:%?32?%;font-family:PingFang SC;font-weight:500;color:#666}.wxlogin-yzm-hq uni-text[data-v-46d6b05c]{padding-left:%?20?%;font-size:%?32?%;font-family:PingFang SC;font-weight:500;color:#666}.wxlogin-pws[data-v-46d6b05c]{width:%?588?%;\n  /* width: 100%; */padding:%?65?% %?0?% %?20?% %?0?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;margin:0 auto}.wxlogin-pws uni-input[data-v-46d6b05c]{display:block;width:100%;border:none!important;padding-left:%?13?%;font-size:%?32?%;font-family:PingFang SC;font-weight:500;color:#333}uni-input[data-v-46d6b05c]::-webkit-input-placeholder{color:#cacaca}uni-input[data-v-46d6b05c]::-moz-placeholder{\n  /* Mozilla Firefox 19+ */color:#cacaca}uni-input[data-v-46d6b05c]:-moz-placeholder{\n  /* Mozilla Firefox 4 to 18 */color:#cacaca}uni-input[data-v-46d6b05c]:-ms-input-placeholder{\n  /* Internet Explorer 10-11 */color:#cacaca}.wxlogin-pws-icon[data-v-46d6b05c]{margin-right:%?15?%;width:%?50?%;height:%?40?%}.wxlogin-pws-icon uni-image[data-v-46d6b05c]{display:block;width:100%;height:100%}.wxlogin-wxlogin[data-v-46d6b05c]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;padding-top:%?70?%}.wxlogin-wxlogin .wxlogin-btn[data-v-46d6b05c]{width:%?570?%;height:%?90?%;background:#eee;border-radius:45px;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;font-size:%?36?%;color:#999}.wxlogin-btn uni-text[data-v-46d6b05c]{font-size:%?36?%;font-family:PingFang SC}.cahngeColor[data-v-46d6b05c]{background:#dc2a1f;color:#fff}.wxlogin-info[data-v-46d6b05c]{width:%?495?%;height:%?25?%;font-size:%?26?%;font-family:PingFang SC;font-weight:500;color:#333;line-height:%?113?%;display:-webkit-box;display:-webkit-flex;display:flex;margin:auto;margin-left:%?90?%}.wxlogin-info-right[data-v-46d6b05c]{text-align:right;color:#1879e5}.wxlogin-other[data-v-46d6b05c]{padding-top:25%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.wxlogin-other uni-text[data-v-46d6b05c]{text-align:center;font-size:%?26?%;font-family:PingFang SC;font-weight:500;color:#333}.wxlogin-imgbtn[data-v-46d6b05c]{padding-top:%?29?%;display:-webkit-box;display:-webkit-flex;display:flex;\n  /* flex-direction: column; */-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.wxlogin-imgbtn uni-image[data-v-46d6b05c]{width:%?84?%;height:%?84?%\n  /* margin: auto; */}.wxlogin-imgbtn-wx[data-v-46d6b05c]{position:relative;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%)\n  /* padding-right: 39rpx; */}.showPhone[data-v-46d6b05c]{position:absolute;left:0;top:0;width:%?84?%;height:%?84?%;background:transparent}uni-button[data-v-46d6b05c]::after{border:none!important}.wxlogin-imgbtn-st[data-v-46d6b05c]{padding-left:%?39?%}.wxlogin-register[data-v-46d6b05c]{text-align:right;padding-top:%?30?%;padding-right:%?40?%;font-size:%?28?%;font-family:PingFang SC;font-weight:500;color:#db1f13}.wxlogin-imgbtn-l[data-v-46d6b05c]{position:relative;width:%?160?%\n  /* background: red; */}.wxlogin-imgbtn-r[data-v-46d6b05c]{width:%?160?%\n  /* background: red; */}.wxlogin-imgbtn-name[data-v-46d6b05c]{text-align:center;font-size:%?26?%}.loginWx[data-v-46d6b05c]{position:absolute;top:0;left:0;width:%?160?%;height:%?120?%;background:transparent}',""]),e.exports=n}}]);